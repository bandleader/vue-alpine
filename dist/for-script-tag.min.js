(function(){"use strict";function init(){console.log("vue-alpine 0.1.0 initializing...");const findWithTag=(t,e)=>Array.from(document.querySelectorAll(`*[${t}]`)).forEach(e),walkDOM=function(t,e){for(e(t),t=t.firstChild;t;)walkDOM(t,e),t=t.nextSibling},renameAttribute=(t,e)=>n=>{n.setAttribute(e,n.getAttribute(t)),n.removeAttribute(t)};"x-show x-bind x-on x-model x-text x-html x-if x-for x-cloak".split(" ").forEach((t=>findWithTag(t,renameAttribute(t,"v-"+t.slice(2))))),findWithTag("x-ref",renameAttribute("x-ref","ref"));var els=[];els.push(...document.querySelectorAll("*[x-component]")),els.push(...document.querySelectorAll("*[x-data]")),els.push(...document.querySelectorAll("*[x-opts]")),els=Array.from(new Set(els));const attrsWith=(t,e)=>Array.from(t.attributes||[]).filter((t=>t.name.startsWith(e+":"))).map((t=>{const n=t.name.substr(e.length+1).split("."),o=n.slice(1),r=n[0];return{...t,arg:r,modifiers:o,value:t.value}}));els.forEach((t=>walkDOM(t,(t=>{const e=attrsWith(t,"x-let");if(!e.length)return;const n=e.map((t=>t.arg)),o=e.map((t=>t.value)),r=t.getAttribute("v-for");if(r){const e=r.substr(0,r.indexOf(" in")),i=r.substr(r.indexOf(" in")+3);t.setAttribute("v-for",`[${e},${n}] in ${i}.map(${e} => [${e},${o}])`)}else t.setAttribute("v-for",`[${n}] in [[${o}]]`)})))),els.forEach((el=>{const evalAsExpr=text=>eval(`(${text})`),getAttr=(t,e,n)=>el.getAttribute(t)?e(el.getAttribute(t)):n,getFunc=t=>evalAsExpr(`function() { with(this) { ${t} } }`),getExprFunc=t=>getFunc(`return (${t})`),getExprFuncEx=t=>t.startsWith("~")?getFunc(t.substr(1)):getExprFunc(t),opts=getAttr("x-opts",evalAsExpr,{});opts.el=el,getAttr("x-data",(data=>opts.data=eval(`() => (${data})`)));const xComputed=Array.from(el.attributes).filter((t=>t.name.startsWith("x-computed:")));opts.computed={},xComputed.forEach((t=>{opts.computed[t.name.substr(11)]=getExprFuncEx(t.value)})),getAttr("x-init",(t=>{const e=getExprFunc(t);opts.created=function(){var t=e.apply(this);"function"==typeof t&&this.$on("hook:mounted",t)}})),el.getAttribute("x-component")?(opts.name=el.getAttribute("x-component"),opts.props=getAttr("x-props",eval,[]),console.log("Registering component",opts.name,el),opts.template=el.innerHTML,delete opts.el,Vue.component(opts.name,opts),el.remove()):(console.log("Registering root element",el),new Vue(opts))}))}function onDocumentReady(t){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(t,1):document.addEventListener("DOMContentLoaded",t)}function vueAlpineInit(){onDocumentReady(init)}})();
